##### Πληροφορίες
- Υλοποίηση προγράμματος από: Κωνσταντίνο Γεώργιο Βλαζάκη(sdi2300017)
- Λειτουργικό σύστημα οπου εκτελέστηκαν τα προγράμματα: Linux Mint 22.2 Cinnamon
- CPU: AMD Ryzen 5 7600 6-Core Processor
- GCC version: gcc (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0

##### Πρόβλημα
- Το πρόβλημα απαιτεί την υλοποίηση ενός συστήματος **προσομοίωσης τράπεζας** σε περιβάλλον **πολυνηματικής εκτέλεσης (Pthreads)**. Ο πυρήνας του προβλήματος είναι η ασφαλής διαχείριση ενός **κοινόχρηστου πίνακα υπολοίπων λογαριασμών**, όπου πολλαπλά νήματα εκτελούν ταυτόχρονα δύο τύπους συναλλαγών: **(i) Μεταφορές χρημάτων** (τροποποίηση δύο λογαριασμών) και **(ii) Αναγνώσεις υπολοίπων**. Η κυριότερη πρόκληση έγκειται στην **ανάγκη συγχρονισμού** των νημάτων, ώστε να διασφαλίζεται η **ακεραιότητα των δεδομένων** (π.χ., να μην χάνονται χρήματα από ταυτόχρονες μεταφορές) και να αποφεύγονται **συνθήκες ανταγωνισμού (race conditions)** κατά την πρόσβαση στον κοινόχρηστο πίνακα.

##### Υλοποίηση
- Global αρχικοποιήσεις:
	- Η δομή (struct) "thread_arguments" χρησιμοποιείται για να προσφερθούν πολλαπλά ορίσματα σε κάθε συνάρτηση νήματος. Τα ορίσματα που περιέχει είναι:
		1. **list_of_accounts**: Ένας δείκτης προς τη λίστα με τα υπόλοιπα λογαριασμών.
		2. **number_of_transactions**: Ο αριθμός των συναλλαγών που έχει να κάνει ένα νήμα.
		3. **thread_rank**: Το id που αντιστοιχεί στο συγκεκριμένο νήμα.
	- Το κλείδωμα αμοιβαίου αποκλεισμού "mutex" και το κλείδωμα ανάγνωσης-εγγραφής "rwlock" χρησιμοποιούνται για ξεχωριστές υλοποιήσεις συγχρονισμού.
	- Το string "lock_type" που περιγράφει τον τύπο κλειδώματος τον οποίο θα εφαρμόσει το πρόγραμμα. (Οι έγκυρες επιλογές είναι "MUTEX_COARSEGRAINED"/"MUTEX_FINEGRAINED" και "RW_COARSEGRAINED"/"RW_FINEGRAINED").
	- Οι λίστες κλειδωμάτων αποκλεισμού και ανάγνωσης-εγγραφής "mutex_list" και "rw_list" αντίστοιχα χρησιμοποιούνται για την υλοποίηση fine-grained κλειδωμάτων συγχρονισμού.
	- Ο ακέραιος "balance_count" που αντιστοιχεί στον αριθμό υπολοίπων. 
	- Και η λίστα "thread_transactions" στην οποία αθροίζονται όλες οι πράξεις που κάνουν όλα τα νήματα πάνω στα υπόλοιπα της "balance_list", με σκοπό να χρησιμοποιηθούν αργότερα για τον έλεγχο της ορθής εκτέλεσης του προγράμματος.
- Κύριο νήμα(main)
	- Αρχικοποιήσεις:
		- Δύο στιγμιότυπα της δομής "timespec" τα οποία χρησιμοποιούνται με τη συνάρτηση "timespec_get" για να βρεθεί ο συνολικός χρόνος παράλληλης εκτέλεσης των threads (parallel_execution_start, parallel_execution_finish).
		- Ορίσματα από τη γραμμή εντολών για την εκτέλεση του προγράμματος:
			- Μέγεθος της λίστας υπολοίπων(balance_count).
			- Αριθμός συναλλαγών που θα εκτελέσει κάθε νήμα στον βρόχο της αντίστοιχης συνάρτησής του(transactions_count).
			- Ποσοστό συναλλαγών που θα εκτελέσουν λειτουργία ερώτησης υπολοίπου(read_percentage).
			- Τύπος κλειδώματος που θα εφαρμοστεί στα critical sections των συναρτήσεων νημάτων(lock_type).
			- Ο συνολικός αριθμός νημάτων που θα εκτελεστούν στο πρόγραμμα(thread_count).
		- Αρχικοποίηση κλειδωμάτων (μέσω της βοηθητικής συνάρτησης mtxrw_init), τα οποία θα είναι είτε τα locks "mutex" και "rwlock", ή όλα τα indexes από τις λίστες "mutex_list" και "rw_list", ανάλογα με το αν έχει επιλεχθεί υλοποίηση με coarse-grained ή fine-grained locking. Τα indexes των λιστών από locks θα είναι τόσα όσα τα υπόλοιπα λογαριασμών στην λίστα "balance_list" (δηλαδή θα έχουμε "balance_count" indexes για "balance_count" υπόλοιπα.)
		- **balance_list**: Δέσμευση μνήμης για τη λίστα υπολοίπων λογαριασμού με μέγεθος "balance_count" ακέραιους.
		- **thread_transactions**: Δέσμευση μνήμης για τη λίστα ελέγχου εκτέλεσης με μέγεθος "balance_count" ακέραιους. Η συνάρτηση νήματος "balance_transfer" εφαρμόζει κάθε πράξη που κάνει σε κάποιο index της "balance_list", στο αντίστοιχο index της "thread_transactions".
		- **expected_list**: Δέσμευση μνήμης για το αντίγραφο της λίστας υπολοίπων λογαριασμού με μέγεθος "balance_count" ακέραιους. Αυτό το αντίγραφο θα αθροιστεί με τις τιμές που θα περιέχει η λίστα "thread_transactions" ώστε να ελέγξουμε εάν έχουν γίνει σωστά οι πράξεις στην λίστα "balance_list".
		- Αρχικοποίηση στοιχείων της λίστας "balance_list" με τυχαίους ακέραιους στο διάστημα [0, 100], και εκτύπωσή της. Οι ίδιες τιμές εισάγονται στην λίστα "expected_list". Οι τιμές κάθε στοιχείου της λίστας "thread_transactions" αρχικοποιούνται ως 0.
		- **reader_threads**: Ο αριθμός νημάτων για λειτουργία ερωτήματος υπολοίπου υπολογίζεται αφαιρόντας 1 νήμα από το δοσμένο "thread_count", εφόσον 1 νήμα χρησιμοποιείται για λειτουργία μεταφοράς χρημάτων και όλα τα υπόλοιπα για ερωτήματος υπολοίπου.
		- **reader_handle**: Δέσμευση μνήμης για μία λίστα από struct pthread_t νήματα που θα χρησιμοποιηθούν για λειτουργία ερωτήματος υπολοίπου.
		- **writer_handle**: Δημιουργία μιας struct pthread_t για το νήμα που θα χρησιμοποιηθεί για λειτουργία μεταφοράς χρημάτων.
		- **total_transactions**: Ο συνολικός αριθμός των συναλλαγών που θα γίνουν σε όλο το πρόγραμμα. Υπολογίζεται ως το γινόμενο του αριθμού συναλλαγών ανά νήμα (transactions_count) και του αριθμού νημάτων που θα εκτελεστούν στο πρόγραμμα.
		- **read_transactions_count**: Ο αριθμός συναλλαγών που θα εκτελέσουν λειτουργία ερωτήματος υπολοίπου. Χρησιμοποιούμε ceil για περιπτώσεις όπου η διαίρεση δεν έχει ακέραιο αποτέλεσμα. Σε περιπτώσεις όπου έχουμε 50% συναλλαγές ερωτήματος υπολοίπου, και το αποτέλεσμα της διαίρεσης καταλήγει σε μη ακέραια τιμή, περισσότερες συναλλαγές θα τεθούν σε λειτουργία ερωτήματος υπολοίπου, απ' ό,τι μεταφοράς χρημάτων.
		- **transactions_per_read_thread**: Ο αριθμός συναλλαγών που θα εκτελέσει κάθε νήμα ερωτήματος υπολοίπου. Χρησιμοποιούμε ceil για περιπτώσεις όπου η διαίρεση δεν έχει ακέραιο αποτέλεσμα.
		- **transfer_transactions_count**: Ο αριθμός συναλλαγών που θα εκτελέσει το νήμα μεταφοράς χρημάτων. Δηλαδή οι συναλλαγές που απομένουν από το σύνολο μόλις αφαιρεθούν οι συναλλαγές ερωτήματος υπολοίπου.
		- **remaining_reads**: Μετρητής για το πόσες συναλλαγές ερωτήματος υπολοίπου απομένουν, αρχικοποιείται με την τιμή του read_transactions_count (δηλαδή τον συνολικό αριθμό συναλλαγών ερωτήματος υπολοίπου).
		- **args**: Στιγμιότυπο της δομής "thread_arguments", που προσδίδει τα κατάλληλα ορίσματα σε κάθε νήμα.
	- Βρόχος for: 
		- Τρέχει από το 0 έως το "reader_threads".
		- Ελέγχει πάντα πόσες συναλλαγές έχουν μείνει από το σύνολο, σε περίπτωση που μένουν λιγότερες από το "transactions_per_read_thread", θέτει την τιμή του σε όσες έχουν απομείνει, για να τις εκτελέσει το τελευταίο νήμα. Αυτό χρειάζεται σε περιπτώσεις όπου ο συνολικός αριθμός συναλλαγών ερωτήματος υπολοίπου δεν είναι πολλαπλάσιο του αριθμού νημάτων για συναλλαγή ερωτημάτων.
		- Θέτει τις τιμές των ορισμάτων μέσα στο "args" ως:
			- Την "balance_list",
			- το **transactions_per_read_thread** - και το id του εκτελούμενου νήματος(thread).
		- Εκτελεί νήματα με τη συνάρτηση νήματος "balance_read" και με όρισμα το "args".
		- Τέλος, μειώνει τον αριθμό των threads που απομένουν(remaining_reads) από τον αριθμό όσων έχουν μόλις ανατεθεί στο καλούμενο νήμα(transactions_per_read_thread).
	- Εκτέλεση ενός νήματος μεταφοράς χρημάτων:
		- Θέτει τις τιμές των ορισμάτων μέσα στο "args" ως:
			- Την "balance_list",
			- το **transfer_transactions_count** - και το id του εκτελούμενου νήματος(thread).
		- Εκτελεί το νήμα με συνάρτηση νήματος την "balance_transfer" και όρισμα το args.
	- Τερματισμός νημάτων μετά την εκτέλεση:
		- Βρόχος for που κάνει pthread_join όλα τα νήματα ερωτήματος υπολοίπου.
		- Pthread_join για το νήμα μεταφοράς χρημάτων.
	- Υπολογισμός χρόνου παράλληλης εκτέλεσης νημάτων:
		- Έχοντας ήδη λάβει ένα στιγμιότυπο χρόνου στην αρχή της παράλληλης εκτέλεσης(parallel_execution_start) και ένα στο τέλος της(parallel_execution_finish), χρησιμοποιούμε τη βοηθητική συνάρτηση time_elapsed για να βρούμε το συνολικό χρονικό διάστημα για το οποίο έτρεξε η παράλληλη εκτέλεση, το οποίο εκτυπώνεται.
	- Εκτυπώνονται όλα τα στοιχεία της λίστας "balance_list", αφότου έχει ολοκληρωθεί η εκτέλεση όλων των νημάτων, δηλαδή έχουν γίνει όσες αλλαγές χρειάζονταν από το νήμα μεταφοράς χρημάτων.
	- Έλεγχος τιμών της "balance_list":
		- Αθροίζουμε κάθε στοιχείο της λίστας "expected_list" (αρχικά αντίγραφο της "balance_list") με κάθε στοιχείο της λίστας "thread_transactions" (οι ολοκληρωμένες πράξεις που έχουν διεξαχθεί σε κάθε στοιχείο της λίστας "balance_list") και ελέγχουμε εάν τα στοιχεία της "expected_list" μετά το άθροισμα ταιριάζουν με τις νέες τιμές των υπολοίπων στην "balance_list" (μέσω του μετρητή "counter"). Αν όλα τα στοιχεία ταιριάζουν ανάμεσα στις δύο λίστες (δηλαδή ο counter αποκτάει την τιμή του "balance_count"), τότε οι πράξεις έχουν γίνει σωστά. Εκτυπώνεται ανάλογο μήνυμα σε αυτή ή στην αντίθετη περίπτωση.
	- Στο τέλος του προγράμματος, καθαρίζονται όσοι δείκτες έχουν χρησιμοποιηθεί.
- Συναρτήσεις νήματος
	- **balance_transfer**:
		- Λειτουργία:
			- Κάθε νήμα μεταφοράς χρημάτων λαμβάνει από τη δομή ορισμάτων (struct thread_arguments) τον δείκτη στην λίστα υπολοίπων(list) και τον αριθμό συναλλαγών που πρέπει να εκτελέσει(transfers). 
			- Τρέχει έναν βρόχο for από το 0 έως το "transfers", όπου:
				- Επιλέγει έναν τυχαίο ακέραιο στο διάστημα [0, balance_count] για να αφαιρέσει από το υπόλοιπο του αποστολέα και να προσθέσει στο υπόλοιπο του παραλήπτη (transfer_amount),
				- ένα τυχαίο index στο διάστημα [0, balance_count] που αντιστοιχεί σε κάποιο υπόλοιπο αποστολέα(sender),
				- ένα τυχαίο index στο διάστημα [0, balance_count] που αντιστοιχεί σε κάποιο υπόλοιπο παραλήπτη(receiver), το οποίο φροντίζει να μην είναι ίδιο με το index του αποστολέα.
				- Φροντίζει το επιλεγόμενο ποσό "transfer_amount" να μην παράγει αρνητικές τιμές όταν αφαιρείται από το υπόλοιπο του αποστολέα.
				- **CRITICAL SECTION**: Αφαιρεί από το υπόλοιπο του αποστολέα το "transfer_amount" και από το αντίστοιχο index στην λίστα "thread_transactions". Εφόσον αυτή η πράξη αποτελεί critical section, την κλειδώνουμε μέσω της συνάρτησης mtxrw_lock, στην οποία, με βάση την επιλογή του χρήστη ανάμεσα σε coarse-grained ή fine-grained locking, δίνουμε ως ορίσματα είτε τα locks  "mutex" και "rwlock", ή το index από τις λίστες "mutex_list" και "rw_list", που αναλογεί στον συγκεκριμένο αποστολέα. Ξεκλειδώνουμε το critical section, αντίστοιχα.
				- **CRITICAL SECTION**: Προσθέτει στο υπόλοιπο του παραλήπτη το "transfer_amount" και στο αντίστοιχο index στην λίστα "thread_transactions". Εφόσον αυτή η πράξη αποτελεί critical section (καθώς κάνει αλλαγές στην κοινόχρηστη λίστα υπολοίπων), την κλειδώνουμε μέσω της συνάρτησης mtxrw_lock, στην οποία, με βάση την επιλογή του χρήστη ανάμεσα σε coarse-grained ή fine-grained locking, δίνουμε ως ορίσματα είτε τα locks  "mutex" και "rwlock", ή το index από τις λίστες "mutex_list" και "rw_list", που αναλογεί στον συγκεκριμένο παραλήπτη. Ξεκλειδώνουμε το critical section, αντίστοιχα.
			- Αφότου ολοκληρωθεί η εκτέλεση του βρόχου, η συνάρτηση επιστρέφει NULL.
	- **balance_read**: 
		- Λειτουργία:
			- Κάθε νήμα ερώτησης υπολοίπου λαμβάνει από τη δομή ορισμάτων (struct thread_arguments) τον δείκτη στην λίστα υπολοίπων(list), τον αριθμό συναλλαγών που πρέπει να εκτελέσει(reads) και το id του νήματος(my_rank). 
			- Τρέχει έναν βρόχο for από το 0 έως το "reads", όπου:
				- Επιλέγει ένα τυχαίο index στο διάστημα [0, balance_count] που αντιστοιχεί σε κάποιο υπόλοιπο το οποίο πρόκειται να διαβάσει.
				- **CRITICAL SECTION**: Διαβάζει το υπόλοιπο στο index που έχει επιλέξει και το προσθέτει σε ένα ιδιωτικό άθροισμα(balance_sum). Εφόσον αποτελεί critical section (καθώς λαμβάνει πρόσβαση σε κοινόχρηστη λίστα), αυτή η πράξη κλειδώνεται με αμοιβαίο αποκλεισμό ή κλείδωμα ανάγνωσης-εγγραφής, όπου, με βάση την επιλογή του χρήστη ανάμεσα σε coarse-grained ή fine-grained locking, δίνουμε ως ορίσματα είτε τα locks  "mutex" και "rwlock", ή το index από τις λίστες "mutex_list" και "rw_list", που αναλογεί στο συγκεκριμένο υπόλοιπο το οποίο διαβάζεται. Ξεκλειδώνουμε το critical section, αντίστοιχα.
			- Αφότου ολοκληρωθεί η εκτέλεση του βρόχου, η συνάρτηση εκτυπώνει το άθροισμα που έχει υπολογίσει και επιστρέφει NULL.

- Συναρτήσεις διαχείρισης κλειδωμάτων(mtxrw)
	- **mtxrw_init**: 
		- Ορίσματα: 
			1. ένα string για τον τύπο κλειδώματος που θα εφαρμόσει το πρόγραμμα(όπως το lock_type),  
			2. την διεύθυνση ενός mutex για κλείδωμα, 
			3. και την διεύθυνση ενός readers-writer lock για κλείδωμα. 
		- Λειτουργία: 
			- Αρχικοποιεί ένα mutex lock ή ένα readers-writers lock χρησιμοποιώντας τις αντίστοιχες pthreads συναρτήσεις "pthread_mutex_init/pthread_rwlock_init", με βάση τον τύπο κλειδώματος που έχει τεθεί στο string "lock", το οποίο λαμβάνει την τιμή του "lock_type" κατά την εκτέλεση.
	-  **mtxrw_lock**: 
		- Ορίσματα:
			1. ένα string για τον τύπο κλειδώματος που θα εφαρμόσει το πρόγραμμα(όπως το lock_type), 
			2. ένα string για να οριστεί εάν χρειάζεται κλείδωμα για ανάγνωση ή για εγγραφή
			3. την διεύθυνση ενός mutex για κλείδωμα, 
			4. και την διεύθυνση ενός readers-writer lock για κλείδωμα. 
		- Λειτουργία:
			- Κλειδώνει ένα mutex lock ή ένα readers-writers lock χρησιμοποιώντας τις αντίστοιχες pthreads συναρτήσεις, με βάση τον τύπο κλειδώματος που έχει τεθεί στο string "lock", το οποίο λαμβάνει την τιμή του "lock_type" κατά την εκτέλεση. Επιπλέον, σε περίπτωση κλειδώματος ανάγνωσης-εγγραφής, ξεχωρίζει ανάμεσα σε κλείδωμα για λειτουργία ανάγνωσης, ή λειτουργία εγγραφής.
	- mtxrw_unlock:
		- Ορίσματα:
			1. ένα string για τον τύπο κλειδώματος που θα εφαρμόσει το πρόγραμμα(όπως το lock_type),  
			2. την διεύθυνση ενός mutex για κλείδωμα, 
			3. και την διεύθυνση ενός readers-writer lock για κλείδωμα. 
		- Λειτουργία:
			- Ξεκλειδώνει ένα mutex lock ή ένα readers-writers lock χρησιμοποιώντας τις αντίστοιχες pthreads συναρτήσεις, με βάση τον τύπο κλειδώματος που έχει τεθεί στο string "lock", το οποίο λαμβάνει την τιμή του "lock_type" κατά την εκτέλεση. Δεν χρειάζεται έλεγχος για το αν ξεκλειδώνουμε μετά από λειτουργία ανάγνωσης ή εγγραφής, εφόσον η συνάρτηση pthread_rwlock_unlock δεν ξεχωρίζει ανάμεσα στα δύο, και απλά απελευθερώνει το κλείδωμα που έχει δοθεί σαν όρισμα.
- Βοηθητικές συναρτήσεις
	- **rand_from_range**: 
		- Ορίσματα:
			1. Ένας ακέραιος, ο οποίος αποτελεί τον υψηλότερο αριθμό ενός εύρους που ξεκινάει από το 0.
		- Λειτουργία:
			- Επιστρέφει έναν τυχαίο ακέραιο αριθμό στο διάστημα που αρχίζει από το 0 και φτάνει έως τον αριθμό που έχει δοθεί σαν όρισμα. Χρησιμοποιεί την πράξη "int result = rand() % range_max + 1;", ώστε να αποφευχθεί, όσο γίνεται, το bias στην τυχαία επιλογή αριθμών.
	- **time_elapsed**:
		- Ορίσματα:
			- Ένα στιγμιότυπο της δομής "timespec" το οποίο δηλώνει την αρχή του χρονικού διαστήματος.
			- Ένα στιγμιότυπο της δομής "timespec" το οποίο δηλώνει το τέλος του χρονικού διαστήματος.
		- Λειτουργία:
			- Επιστρέφει τον συνολικό χρόνο που έχει περάσει ανάμεσα στα δύο χρονικά διαστήματα, σε δεκαδική(double) μορφή "sec.nsec".

Εκτέλεση προγράμματος μέσω Makefile
- Τα ορίσματα δηλωμένα στο Makefile είναι:
	- A(μέγεθος λίστας υπολοίπων),
	- TR(αριθμός συναλλαγών ανά νήμα),
	- R(ποσοστό συναλλαγών ερωτήματος υπολοίπου),
	- L(τύπος κλειδώματος),
	- T(αριθμός νημάτων προς εκτέλεση).
- Με την εντολή "make run-main", το πρόγραμμα εκτελείται με προεπιλεγμένες τιμές για τα πεδία ορισμάτων(100 στοιχεία στην "balance_list", 250 συναλλαγές ανά thread,  50% συναλλαγές ερωτήματος υπολοίπου, Coarse-grained κλείδωμα αμοιβαίου αποκλεισμού και 4 νήματα διαθέσιμα).
- Τα ορίσματα μπορούν να αλλαχθούν κατά την επίκληση της εντολής "make run-main".
	- π.χ. Η εντολή "make run-main A=10 TR=100 R=30 L=RW_FINEGRAINED T=6" εκτελεί το πρόγραμμα με 10 στοιχεία στην "balance_list", 100 συναλλαγές ανά thread,  30% συναλλαγές ερωτήματος υπολοίπου, Fine-grained κλείδωμα ανάγνωσης-εγγραφής και 6 νήματα διαθέσιμα.


Συμπεράσματα
- Εκτελούμε το πρόγραμμα με δεδομένα TR=250 R=50 T=4, και αλλάζουμε το A και το L. Οι μέσοι όροι των χρόνων μετριούνται σε sec.

| Lock type           | A=10     | A=100    | A=1000   |
| ------------------- | -------- | -------- | -------- |
| MUTEX_COARSEGRAINED | 0.000135 | 0.000154 | 0.000154 |
| MUTEX_FINEGRAINED   | 0.000151 | 0.000167 | 0.000130 |
| RW_COARSEGRAINED    | 0.000152 | 0.000170 | 0.000149 |
| RW_FINEGRAINED      | 0.000157 | 0.000176 | 0.000187 |
- Εκτελούμε το πρόγραμμα με δεδομένα A=100 R=50 T=4, και αλλάζουμε το TR και το L. Οι μέσοι όροι των χρόνων μετριούνται σε sec.

| Lock type           | TR=10    | TR=100   | TR=1000  |
| ------------------- | -------- | -------- | -------- |
| MUTEX_COARSEGRAINED | 0.000107 | 0.000110 | 0.000458 |
| MUTEX_FINEGRAINED   | 0.000095 | 0.000118 | 0.000494 |
| RW_COARSEGRAINED    | 0.000114 | 0.000127 | 0.008054 |
| RW_FINEGRAINED      | 0.000100 | 0.000129 | 0.000737 |
- Εκτελούμε το πρόγραμμα με δεδομένα A=100 TR=250 T=4, και αλλάζουμε το R και το L. Οι μέσοι όροι των χρόνων μετριούνται σε sec.

| Lock type           | R=30     | R=50     | R=70     |
| ------------------- | -------- | -------- | -------- |
| MUTEX_COARSEGRAINED | 0.000150 | 0.000144 | 0.000132 |
| MUTEX_FINEGRAINED   | 0.000177 | 0.000136 | 0.000129 |
| RW_COARSEGRAINED    | 0.000917 | 0.000461 | 0.000129 |
| RW_FINEGRAINED      | 0.000242 | 0.000176 | 0.000129 |

- Η Fine-grained υλοποίηση αμοιβαίου αποκλεισμού είναι πιο γρήγορη από την αντίστοιχη Coarse-grained,  όταν επιβραδύνονται τα νήματα ερωτήματος υπολοίπου. Οι Coarse-grained και Fine-grained υλοποιήσεις ανάγνωσης-εγγραφής έχουν παρόμοια επίδοση. Έχοντας εκτελέσει τα συγκεκριμένα με επιπλέον καθυστέρηση ενός δευτερολέπτου (ή παραπάνω, μέσω της συνάρτησης sleep()). Ως δεδομένα έχουμε A=100 TR=10 R=50 L=MUTEX_COARSEGRAINED T=4.
	- Εκτέλεση πριν τη χρήση της sleep():
		- Με Coarse-grained υλοποίηση αμοιβαίου αποκλεισμού: 33.002206 sec
		- Με Fine-grained υλοποίηση αμοιβαίου αποκλεισμού: 20.001299 sec
		- Με Coarse-grained υλοποίηση ανάγνωσης-εγγραφής: 20.001524 sec
		- Με Fine-grained υλοποίηση ανάγνωσης-εγγραφής: 20.001310 sec
